"use strict";(()=>{var e={};e.id=962,e.ids=[962],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7966:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>P,originalPathname:()=>f,patchFetch:()=>T,requestAsyncStorage:()=>d,routeModule:()=>h,serverHooks:()=>A,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>b});var o={};r.r(o),r.d(o,{POST:()=>g});var a=r(9462),n=r(5345),i=r(7143),s=r(2969);let l=process.env.API_BASE_URL,u=process.env.API_GET_BILL_PATH,p=process.env.API_COOKIE,c=process.env.API_CSRF_TOKEN;async function g(e){try{let{account:t,product_id:r}=await e.json();if(!t||!r)return s.Z.json({error:"Thiếu account hoặc product_id"},{status:400});let o=new AbortController,a=setTimeout(()=>o.abort(),1e4);try{let e;let n=await fetch(new URL(u,l).toString(),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*","a-csrftoken":c,"a-from":"APC-js","a-lang":"vi","a-os":"web","a-timestamp":Math.floor(Date.now()/1e3).toString(),Cookie:p,Origin:l,Referer:`${l}/`,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36"},body:JSON.stringify({account:t,product_id:r,custom_bill_amount:"",province:"",configurable:!0}),signal:o.signal});clearTimeout(a);let i=n.headers.get("content-type")||"",g=await n.text();if(!i.includes("application/json"))return s.Z.json({error:"Lỗi từ API Cổng 1 (C\xf3 thể bị chặn)",details:g||"Phản hồi kh\xf4ng phải JSON"},{status:n.status});try{e=JSON.parse(g)}catch(e){return console.error("Lỗi parse JSON Cổng 1:",e,"Response text:",g),s.Z.json({error:"API Cổng 1 trả về JSON kh\xf4ng hợp lệ (c\xf3 thể l\xe0 rỗng)",details:e.message},{status:500})}return s.Z.json(e,{status:n.status})}finally{clearTimeout(a)}}catch(e){if(console.error("Error in /api/get-bill:",e),"AbortError"===e.name||"ETIMEDOUT"===e.code)return s.Z.json({error:"Gateway Timeout (API Cổng 1 kh\xf4ng phản hồi)"},{status:504});return s.Z.json({error:e.message},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/get-bill/route",pathname:"/api/get-bill",filename:"route",bundlePath:"app/api/get-bill/route"},resolvedPagePath:"/workspace/shadcn-ui/app/api/get-bill/route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:A,headerHooks:P,staticGenerationBailout:b}=h,f="/api/get-bill/route";function T(){return(0,i.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[120,971],()=>r(7966));module.exports=o})();