"use strict";(()=>{var e={};e.id=962,e.ids=[962],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7966:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>x,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>j});var n={};r.r(n),r.d(n,{POST:()=>h,dynamic:()=>l,runtime:()=>p});var a=r(9462),o=r(5345),i=r(7143),s=r(2969),u=r(6797),c=r(8165);let l="force-dynamic",p="nodejs";async function h(e){if(!(0,u.cookies)().get("session"))return s.Z.json({error:"Chưa đăng nhập"},{status:401});try{let t;let{account:r,product_id:n}=await e.json();if(!r||!n)return s.Z.json({error:"Thiếu account hoặc product_id"},{status:400});let a="https://your-api-gateway-1.com",o="/api/get-bill",i="your-api-cookie-here",u="your-csrf-token-here";if(!a||!o||!i||!u)return s.Z.json({error:"Thiếu cấu h\xecnh API Gateway 1"},{status:500});let l=new URL(o,a).toString(),p=await (0,c.kv)(l,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*","a-csrftoken":u,"a-from":"APC-js","a-lang":"vi","a-os":"web","a-timestamp":Math.floor(Date.now()/1e3).toString(),Cookie:i,Origin:a,Referer:`${a}/`,"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"},body:JSON.stringify({account:r,product_id:n,custom_bill_amount:"",province:"",configurable:!0})}),h=p.headers.get("content-type")||"",d=await p.text();if(!h.includes("application/json"))return s.Z.json({error:"Lỗi từ API Gateway 1",details:d||"Phản hồi kh\xf4ng phải JSON"},{status:p.status});try{t=JSON.parse(d)}catch(e){return s.Z.json({error:"API Gateway 1 trả về JSON kh\xf4ng hợp lệ",details:"Lỗi parse JSON"},{status:500})}return s.Z.json(t,{status:p.status})}catch(e){if(console.error("Error in /api/get-bill:",e),"AbortError"===e.name||"ETIMEDOUT"===e.code)return s.Z.json({error:"Gateway Timeout (API Gateway 1 kh\xf4ng phản hồi)"},{status:504});return s.Z.json({error:e.message||"Lỗi kh\xf4ng x\xe1c định"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/get-bill/route",pathname:"/api/get-bill",filename:"route",bundlePath:"app/api/get-bill/route"},resolvedPagePath:"/workspace/shadcn-ui/app/api/get-bill/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:y,headerHooks:f,staticGenerationBailout:j}=d,x="/api/get-bill/route";function w(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:m})}},8165:(e,t,r)=>{r.d(t,{cn:()=>o,kv:()=>i});var n=r(4121),a=r(5497);function o(...e){return(0,a.m6)((0,n.W)(e))}async function i(e,t,r=1e4){let n=new AbortController,a=setTimeout(()=>n.abort(),r);try{return await fetch(e,{...t,signal:n.signal})}finally{clearTimeout(a)}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[472,578,898],()=>r(7966));module.exports=n})();