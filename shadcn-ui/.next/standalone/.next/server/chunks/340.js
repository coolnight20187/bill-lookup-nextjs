exports.id=340,exports.ids=[340],exports.modules={1563:(e,s,t)=>{Promise.resolve().then(t.bind(t,1886)),Promise.resolve().then(t.bind(t,540))},2862:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,6701,23)),Promise.resolve().then(t.t.bind(t,7656,23)),Promise.resolve().then(t.t.bind(t,9306,23)),Promise.resolve().then(t.t.bind(t,9810,23)),Promise.resolve().then(t.t.bind(t,5525,23)),Promise.resolve().then(t.t.bind(t,5990,23))},6935:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,8116,23))},2292:(e,s,t)=>{"use strict";t.d(s,{v:()=>eo});var a=t(4353),r=t(2566),n=t(9262),l=t(5163);let i=n.fC,c=r.forwardRef(({className:e,...s},t)=>a.jsx(n.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=n.aV.displayName;let d=r.forwardRef(({className:e,...s},t)=>a.jsx(n.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=n.xz.displayName;let o=r.forwardRef(({className:e,...s},t)=>a.jsx(n.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=n.VY.displayName;var m=t(2895);let u=(0,t(9786).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:e,variant:s,...t}){return a.jsx("div",{className:(0,l.cn)(u({variant:s}),e),...t})}var x=t(5263),f=t(7518);let g=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));g.displayName="Textarea";var p=t(3897),j=t(3565),b=t(32),v=t(6029);let N=p.fC;p.ZA;let y=p.B4,w=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(p.xz,{ref:r,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(p.JO,{asChild:!0,children:a.jsx(j.Z,{className:"h-4 w-4 opacity-50"})})]}));w.displayName=p.xz.displayName;let k=r.forwardRef(({className:e,...s},t)=>a.jsx(p.u_,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(b.Z,{className:"h-4 w-4"})}));k.displayName=p.u_.displayName;let Z=r.forwardRef(({className:e,...s},t)=>a.jsx(p.$G,{ref:t,className:(0,l.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(j.Z,{className:"h-4 w-4"})}));Z.displayName=p.$G.displayName;let C=r.forwardRef(({className:e,children:s,position:t="popper",...r},n)=>a.jsx(p.h_,{children:(0,a.jsxs)(p.VY,{ref:n,className:(0,l.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(k,{}),a.jsx(p.l_,{className:(0,l.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(Z,{})]})}));C.displayName=p.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(p.__,{ref:t,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=p.__.displayName;let T=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(p.ck,{ref:r,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(p.wU,{children:a.jsx(v.Z,{className:"h-4 w-4"})})}),a.jsx(p.eT,{children:s})]}));T.displayName=p.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(p.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=p.Z0.displayName;var S=t(2892),_=t(4148),R=t(3216),z=t(9573),$=t(7611);function P({onResults:e}){let[s,t]=(0,r.useState)("00906815"),[n,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(""),u=(e,s,t)=>{let a=e.data||{},r=Array.isArray(a.bills)?a.bills:[],n=Number(a.statement_closing||r[0]?.amount||0),l=Number(r[1]?.amount||0),i=Number(a.total_bill_amount||n);return{key:`${t}::${s}`,account:a.account||s,name:a.name||"-",address:a.address||"-",amount_current:String(n),amount_previous:String(l),total:String(i),provider_id:t,raw:a}},h=(e,s)=>{let t="C2-7ty.vn";if(e.success&&e.data?.success&&e.data.data?.bills){if(!(e.data.data.bills.length>0))return{key:`${t}::${s}`,account:s,name:`(M\xe3 ${s})`,address:"Kh\xf4ng nợ cước",amount_current:"0",amount_previous:"0",total:"0",provider_id:t,raw:e.data.data};{let a=e.data.data.bills[0];return{key:`${t}::${s}`,account:s,name:a.customerName||"-",address:a.address||"-",amount_current:String(a.moneyAmount||0),amount_previous:"0",total:String(a.moneyAmount||0),provider_id:t,raw:e.data.data}}}let a=e.error?.message||e.details||"Lỗi tra cứu C2";return e.data?.error&&(a=e.data.error.message||"Lỗi kh\xf4ng x\xe1c định C2"),e.error&&("PAYBILL_QUERY_ERROR-01"===e.error.code||"Kh\xe1ch h\xe0ng kh\xf4ng nợ cước"===e.error)&&(a="Kh\xf4ng nợ cước"),{key:`${t}::${s}`,account:s,name:`(M\xe3 ${s})`,address:a,amount_current:"0",amount_previous:"0",total:"0",provider_id:t,raw:{error:a}}},p=async()=>{let t=n.split("\n").map(e=>e.trim()).filter(e=>e.length>5);if(!t.length){o("Vui l\xf2ng nhập m\xe3 kh\xe1ch h\xe0ng.");return}c(!0),o("");let a=[];try{if(/^\d{8}$/.test(s))for(let r=0;r<t.length;r++){try{let e=await fetch("/api/check-electricity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contract_number:t[r],sku:s})}),n=await e.json(),l=h(n,t[r]);a.push(l)}catch(e){console.error(`Error looking up ${t[r]}:`,e),a.push(h({error:{message:e.message}},t[r]))}e([...a]),r<t.length-1&&await new Promise(e=>setTimeout(e,500))}else{let r=t.filter(e=>/^P[A-Z0-9]{12}$/i.test(e));if(t.length>0&&0===r.length){o("C\xe1c m\xe3 bạn nhập kh\xf4ng hợp lệ cho Gateway 1 (phải l\xe0 PB...).");return}for(let t=0;t<r.length;t++){try{let e=await fetch("/api/get-bill",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({account:r[t].toUpperCase(),product_id:s})}),n=await e.json(),l=u(n,r[t],s);a.push(l)}catch(e){console.error(`Error looking up ${r[t]}:`,e),a.push(u({data:{name:`(M\xe3 ${r[t]})`,address:e.message}},r[t],s))}e([...a]),t<r.length-1&&await new Promise(e=>setTimeout(e,2e3))}}e(a)}catch(e){o(`Lỗi tra cứu: ${e.message}`)}finally{c(!1)}};return(0,a.jsxs)(x.Zb,{className:"h-full",children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2",children:[a.jsx(_.Z,{className:"h-5 w-5"}),"Tra Cứu H\xf3a Đơn"]}),a.jsx(x.SZ,{children:"Tra cứu h\xf3a đơn điện qua 2 cổng API"})]}),(0,a.jsxs)(x.aY,{className:"space-y-4",children:[d&&a.jsx(S.bZ,{variant:"destructive",children:a.jsx(S.X,{children:d})}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"provider",children:"Nh\xe0 cung cấp:"}),(0,a.jsxs)(N,{value:s,onValueChange:t,children:[a.jsx(w,{children:a.jsx(y,{})}),a.jsx(C,{children:[{value:"00906815",label:"Điện lực miền Nam"},{value:"00906819",label:"Điện lực miền Bắc"},{value:"00906818",label:"Điện EVNHCMC"},{value:"00906820",label:"Điện EVN H\xe0 Nội"},{value:"00906817",label:"Điện An Giang"}].map(e=>a.jsx(T,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"accounts",children:"M\xe3 kh\xe1ch h\xe0ng:"}),a.jsx(g,{id:"accounts",value:n,onChange:e=>l(e.target.value),placeholder:"Nhập m\xe3 KH (PB/PA... cho Gateway 1, số hợp đồng cho Gateway 2)",rows:4,className:"resize-none"})]}),a.jsx("div",{className:"flex gap-2",children:(0,a.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>{l(n.split("\n").map(e=>e.trim()).filter((e,s,t)=>e&&t.indexOf(e)===s).join("\n"))},className:"flex-1",children:[a.jsx(R.Z,{className:"h-4 w-4 mr-2"}),"Lọc tr\xf9ng"]})}),a.jsx(m.z,{onClick:p,disabled:i||!n.trim(),className:"w-full",children:i?(0,a.jsxs)(a.Fragment,{children:[a.jsx(z.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Đang tra cứu..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx($.Z,{className:"mr-2 h-4 w-4"}),"Tra cứu"]})})]})]})}var L=t(5336),I=t(2958);let O=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",e),...s})}));O.displayName="Table";let K=r.forwardRef(({className:e,...s},t)=>a.jsx("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",e),...s}));K.displayName="TableHeader";let V=r.forwardRef(({className:e,...s},t)=>a.jsx("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...s}));V.displayName="TableBody",r.forwardRef(({className:e,...s},t)=>a.jsx("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let F=r.forwardRef(({className:e,...s},t)=>a.jsx("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));F.displayName="TableRow";let A=r.forwardRef(({className:e,...s},t)=>a.jsx("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));A.displayName="TableHead";let Y=r.forwardRef(({className:e,...s},t)=>a.jsx("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));Y.displayName="TableCell",r.forwardRef(({className:e,...s},t)=>a.jsx("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption";var H=t(3060),B=t(3963),q=t(7430),E=t(7338),M=t(3006);function X({results:e,userRole:s,userId:t,username:n}){let[i,c]=(0,r.useState)(""),[d,o]=(0,r.useState)(!1),[u,h]=(0,r.useState)(new Set),[g,p]=(0,r.useState)(null),[j,b]=(0,r.useState)(!1),v=(0,r.useMemo)(()=>{let s=e.filter(e=>{if(d&&0===parseInt(e.total))return!1;if(i){let s=i.toLowerCase();return e.name.toLowerCase().includes(s)||e.address.toLowerCase().includes(s)||e.account.toLowerCase().includes(s)||(e.employee_username||"").toLowerCase().includes(s)}return!0});return g&&s.sort((e,s)=>{let t=e[g.key],a=s[g.key];return(("total"===g.key||"amount_current"===g.key||"amount_previous"===g.key)&&(t=parseInt(t)||0,a=parseInt(a)||0),t<a)?"asc"===g.direction?-1:1:t>a?"asc"===g.direction?1:-1:0}),s},[e,i,d,g]),N=(0,r.useMemo)(()=>v.reduce((e,s)=>e+(parseInt(s.total)||0),0),[v]),y=e=>{p(s=>({key:e,direction:s?.key===e&&"asc"===s.direction?"desc":"asc"}))},w=e=>{e?h(new Set(v.map(e=>e.key))):h(new Set)},k=(e,s)=>{let t=new Set(u);s?t.add(e):t.delete(e),h(t)},Z=async()=>{let e=v.filter(e=>u.has(e.key));if(0===e.length){alert("Vui l\xf2ng chọn \xedt nhất một h\xf3a đơn để nhập kho");return}b(!0);try{let s=e.map(e=>({...e,nhap:new Date().toISOString()})),t=await fetch("/api/warehouse/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bills:s})}),a=await t.json();if(!t.ok)throw Error(a.error||"Lỗi nhập kho");alert(`Đ\xe3 nhập ${a.added} h\xf3a đơn mới v\xe0o kho. Tổng: ${a.total}`),h(new Set)}catch(e){alert(`Lỗi nhập kho: ${e.message}`)}finally{b(!1)}},C=async()=>{let e=v.map((e,s)=>[s+1,e.name,e.address,e.account,(0,l.lb)(e.amount_previous||"0"),(0,l.lb)(e.amount_current||"0"),(0,l.lb)(e.total)].join("	")).join("\n");try{await navigator.clipboard.writeText(e),alert("Đ\xe3 sao ch\xe9p v\xe0o clipboard")}catch(e){alert("Lỗi sao ch\xe9p: "+e)}};return 0===e.length?a.jsx(x.Zb,{className:"h-full",children:a.jsx(x.aY,{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(H.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium",children:"Chưa c\xf3 kết quả"}),a.jsx("p",{className:"text-muted-foreground",children:"Bắt đầu tra cứu để xem kết quả"})]})})}):(0,a.jsxs)(x.Zb,{className:"h-full",children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{children:["Kết quả tra cứu (",v.length,")"]}),(0,a.jsxs)(x.SZ,{children:["Tổng tiền: ",a.jsx("span",{className:"font-bold text-green-600",children:(0,l.lb)(N)})]})]}),(0,a.jsxs)(x.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[a.jsx(_.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),a.jsx(L.I,{placeholder:"T\xecm kiếm...",value:i,onChange:e=>c(e.target.value),className:"pl-9"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(I.X,{id:"hideZero",checked:d,onCheckedChange:e=>o(!0===e)}),a.jsx(f._,{htmlFor:"hideZero",className:"text-sm",children:"Ẩn 0₫"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(m.z,{variant:"outline",size:"sm",onClick:()=>{let e=["STT,T\xean KH,Địa chỉ,M\xe3 KH,Kỳ trước,Kỳ n\xe0y,Tổng cộng",...v.map((e,s)=>[s+1,`"${e.name}"`,`"${e.address}"`,e.account,parseInt(e.amount_previous||"0")/1e5,parseInt(e.amount_current||"0")/1e5,parseInt(e.total||"0")/1e5].join(","))].join("\n"),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(s),t.download=`bill-results-${Date.now()}.csv`,t.click()},children:[a.jsx(B.Z,{className:"h-4 w-4 mr-2"}),"Xuất Excel"]}),(0,a.jsxs)(m.z,{variant:"outline",size:"sm",onClick:C,children:[a.jsx(q.Z,{className:"h-4 w-4 mr-2"}),"Sao ch\xe9p"]}),u.size>0&&(0,a.jsxs)(m.z,{size:"sm",onClick:Z,disabled:j,children:[a.jsx(E.Z,{className:"h-4 w-4 mr-2"}),j?"Đang nhập...":`Nhập kho (${u.size})`]})]})]}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(O,{children:[a.jsx(K,{children:(0,a.jsxs)(F,{children:[a.jsx(A,{className:"w-12",children:a.jsx(I.X,{checked:u.size===v.length&&v.length>0,onCheckedChange:e=>w(!0===e)})}),a.jsx(A,{className:"w-16",children:"STT"}),a.jsx(A,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>y("name"),children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:["T\xean KH",a.jsx(M.Z,{className:"h-4 w-4"})]})}),a.jsx(A,{children:"Địa chỉ"}),a.jsx(A,{children:"M\xe3 KH"}),a.jsx(A,{className:"cursor-pointer hover:bg-muted/50 text-right",onClick:()=>y("amount_previous"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Kỳ trước",a.jsx(M.Z,{className:"h-4 w-4"})]})}),a.jsx(A,{className:"cursor-pointer hover:bg-muted/50 text-right",onClick:()=>y("amount_current"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Kỳ n\xe0y",a.jsx(M.Z,{className:"h-4 w-4"})]})}),a.jsx(A,{className:"cursor-pointer hover:bg-muted/50 text-right",onClick:()=>y("total"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:["Tổng cộng",a.jsx(M.Z,{className:"h-4 w-4"})]})})]})}),a.jsx(V,{children:v.map((e,s)=>(0,a.jsxs)(F,{children:[a.jsx(Y,{children:a.jsx(I.X,{checked:u.has(e.key),onCheckedChange:s=>k(e.key,!0===s)})}),a.jsx(Y,{children:s+1}),a.jsx(Y,{className:"font-medium",children:e.name}),a.jsx(Y,{className:"max-w-xs truncate",children:e.address}),a.jsx(Y,{children:a.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:e.account})}),a.jsx(Y,{className:"text-right",children:(0,l.lb)(e.amount_previous||"0")}),a.jsx(Y,{className:"text-right",children:(0,l.lb)(e.amount_current||"0")}),a.jsx(Y,{className:"text-right font-bold",children:a.jsx("span",{className:parseInt(e.total)>0?"text-red-600":"text-green-600",children:(0,l.lb)(e.total)})})]},e.key))})]})}),0===v.length&&e.length>0&&a.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Kh\xf4ng t\xecm thấy kết quả ph\xf9 hợp với bộ lọc"})]})]})}function G({userRole:e,userId:s,username:t}){let[n,l]=(0,r.useState)([]),[i,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),g=async()=>{c(!0);try{let e=await fetch("/api/warehouse/list");if(!e.ok){let s=await e.json();throw Error(s.error||"Lỗi tải kho")}let s=await e.json();l(s)}catch(e){alert(`Lỗi tải kho: ${e.message}`)}finally{c(!1)}};return(0,r.useEffect)(()=>{g()},[]),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2",children:[a.jsx(H.Z,{className:"h-5 w-5"}),"Quản l\xfd Kho"]}),(0,a.jsxs)(x.SZ,{children:["Tổng: ",n.length," h\xf3a đơn trong kho"]})]}),a.jsx(x.aY,{className:"space-y-4",children:a.jsx(m.z,{onClick:g,disabled:i,className:"w-full",children:i?(0,a.jsxs)(a.Fragment,{children:[a.jsx(z.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Đang tải..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(H.Z,{className:"mr-2 h-4 w-4"}),"Tải lại Kho"]})})})]}),(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2",children:[a.jsx(R.Z,{className:"h-5 w-5"}),"Lọc theo số tiền"]}),a.jsx(x.SZ,{children:"Lọc h\xf3a đơn theo khoảng tiền (đơn vị: triệu đồng)"})]}),(0,a.jsxs)(x.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("div",{children:[a.jsx(f._,{htmlFor:"filterFrom",children:"Từ (triệu)"}),a.jsx(L.I,{id:"filterFrom",type:"number",value:d,onChange:e=>o(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{children:[a.jsx(f._,{htmlFor:"filterTo",children:"Đến (triệu)"}),a.jsx(L.I,{id:"filterTo",type:"number",value:u,onChange:e=>h(e.target.value),placeholder:"∞"})]})]}),(0,a.jsxs)(m.z,{onClick:()=>{if(!d&&!u){alert("Vui l\xf2ng nhập số tiền Từ hoặc Đến");return}let e=1e5*(parseFloat(d)||0),s=1e5*(parseFloat(u)||1/0);l(n.filter(t=>{let a=parseInt(t.total)||0;return a>=e&&a<=s}))},className:"w-full",children:[a.jsx(R.Z,{className:"mr-2 h-4 w-4"}),"Lọc"]})]})]})]}),a.jsx(X,{results:n,userRole:e,userId:s,username:t})]})}var Q=t(2703),U=t(8924),D=t(1797);function J({userRole:e}){return"admin"!==e?a.jsx(x.Zb,{children:a.jsx(x.aY,{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(Q.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium",children:"Kh\xf4ng c\xf3 quyền truy cập"}),a.jsx("p",{className:"text-muted-foreground",children:"Chỉ Admin mới c\xf3 thể quản l\xfd nh\xe2n vi\xean"})]})})}):a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2",children:[a.jsx(Q.Z,{className:"h-5 w-5"}),"Quản l\xfd Nh\xe2n vi\xean"]}),a.jsx(x.SZ,{children:"Quản l\xfd t\xe0i khoản v\xe0 th\xf4ng tin nh\xe2n vi\xean"})]}),a.jsx(x.aY,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(U.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Đang ph\xe1t triển"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"T\xednh năng quản l\xfd nh\xe2n vi\xean sẽ được bổ sung trong phi\xean bản tiếp theo"}),(0,a.jsxs)(m.z,{disabled:!0,children:[a.jsx(D.Z,{className:"mr-2 h-4 w-4"}),"Th\xeam nh\xe2n vi\xean"]})]})})]})})}var W=t(1148);function ee({userRole:e,userId:s,username:t}){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2",children:[a.jsx(W.Z,{className:"h-5 w-5"}),"Quản l\xfd Kh\xe1ch h\xe0ng"]}),a.jsx(x.SZ,{children:"Quản l\xfd th\xf4ng tin kh\xe1ch h\xe0ng v\xe0 b\xe1n h\xe0ng"})]}),a.jsx(x.aY,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(U.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Đang ph\xe1t triển"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"T\xednh năng quản l\xfd kh\xe1ch h\xe0ng sẽ được bổ sung trong phi\xean bản tiếp theo"}),(0,a.jsxs)(m.z,{disabled:!0,children:[a.jsx(D.Z,{className:"mr-2 h-4 w-4"}),"Th\xeam kh\xe1ch h\xe0ng"]})]})})]})})}var es=t(5689),et=t(9513);function ea({userRole:e}){return a.jsx("div",{className:"space-y-6",children:(0,a.jsxs)(x.Zb,{children:[(0,a.jsxs)(x.Ol,{children:[(0,a.jsxs)(x.ll,{className:"flex items-center gap-2",children:[a.jsx(es.Z,{className:"h-5 w-5"}),"Lịch sử Giao dịch"]}),a.jsx(x.SZ,{children:"Xem lịch sử c\xe1c giao dịch b\xe1n h\xe0ng"})]}),a.jsx(x.aY,{children:(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(U.Z,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium mb-2",children:"Đang ph\xe1t triển"}),a.jsx("p",{className:"text-muted-foreground mb-4",children:"T\xednh năng lịch sử giao dịch sẽ được bổ sung trong phi\xean bản tiếp theo"}),(0,a.jsxs)(m.z,{disabled:!0,children:[a.jsx(et.Z,{className:"mr-2 h-4 w-4"}),"Xem lịch sử"]})]})})]})})}var er=t(3120),en=t(7905),el=t(6211),ei=t(63),ec=t(1157),ed=t(5394);function eo({user:e,onLogout:s}){let[t,n]=(0,r.useState)("lookup"),[l,u]=(0,r.useState)([]),[x,f]=(0,r.useState)(!1),{theme:g,setTheme:p}=(0,ed.F)(),j=async()=>{f(!0);try{await s()}finally{f(!1)}},b=(()=>{switch(g){case"dark":return er.Z;case"light":return en.Z;default:return el.Z}})();return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[a.jsx("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:a.jsx(H.Z,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-bold",children:"Tra cứu Bill (7tỷ.vn)"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Hệ thống quản l\xfd h\xf3a đơn điện"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(ei.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{className:"text-sm",children:["Ch\xe0o, ",a.jsx("span",{className:"font-medium",children:e.username})]}),a.jsx(h,{variant:"admin"===e.role?"default":"secondary",children:"admin"===e.role?"Admin":"User"})]}),a.jsx(m.z,{variant:"outline",size:"sm",onClick:()=>p("dark"===g?"light":"light"===g?"system":"dark"),children:a.jsx(b,{className:"h-4 w-4"})}),(0,a.jsxs)(m.z,{variant:"destructive",size:"sm",onClick:j,disabled:x,children:[a.jsx(ec.Z,{className:"h-4 w-4 mr-2"}),x?"Đang tho\xe1t...":"Tho\xe1t"]})]})]})}),a.jsx("main",{className:"container mx-auto p-6",children:(0,a.jsxs)(i,{value:t,onValueChange:n,className:"space-y-6",children:[(0,a.jsxs)(c,{className:"grid w-full grid-cols-5",children:[(0,a.jsxs)(d,{value:"lookup",className:"flex items-center gap-2",children:[a.jsx(H.Z,{className:"h-4 w-4"}),"Tra cứu"]}),(0,a.jsxs)(d,{value:"warehouse",className:"flex items-center gap-2",children:[a.jsx(H.Z,{className:"h-4 w-4"}),"Kho h\xe0ng"]}),(0,a.jsxs)(d,{value:"employees",className:"flex items-center gap-2",children:[a.jsx(Q.Z,{className:"h-4 w-4"}),"Nh\xe2n vi\xean"]}),(0,a.jsxs)(d,{value:"customers",className:"flex items-center gap-2",children:[a.jsx(W.Z,{className:"h-4 w-4"}),"Kh\xe1ch h\xe0ng"]}),(0,a.jsxs)(d,{value:"history",className:"flex items-center gap-2",children:[a.jsx(es.Z,{className:"h-4 w-4"}),"Lịch sử"]})]}),a.jsx(o,{value:"lookup",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[a.jsx("div",{className:"lg:col-span-1",children:a.jsx(P,{onResults:e=>{u(e)}})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsx(X,{results:l,userRole:e.role,userId:e.id,username:e.username})})]})}),a.jsx(o,{value:"warehouse",children:a.jsx(G,{userRole:e.role,userId:e.id,username:e.username})}),a.jsx(o,{value:"employees",children:a.jsx(J,{userRole:e.role})}),a.jsx(o,{value:"customers",children:a.jsx(ee,{userRole:e.role,userId:e.id,username:e.username})}),a.jsx(o,{value:"history",children:a.jsx(ea,{userRole:e.role})})]})})]})}},1886:(e,s,t)=>{"use strict";t.r(s),t.d(s,{ThemeProvider:()=>n});var a=t(4353);t(2566);var r=t(5394);function n({children:e,...s}){return a.jsx(r.f,{...s,children:e})}},2892:(e,s,t)=>{"use strict";t.d(s,{X:()=>d,bZ:()=>c});var a=t(4353),r=t(2566),n=t(9786),l=t(5163);let i=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=r.forwardRef(({className:e,variant:s,...t},r)=>a.jsx("div",{ref:r,role:"alert",className:(0,l.cn)(i({variant:s}),e),...t}));c.displayName="Alert",r.forwardRef(({className:e,...s},t)=>a.jsx("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...s})).displayName="AlertTitle";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...s}));d.displayName="AlertDescription"},2895:(e,s,t)=>{"use strict";t.d(s,{z:()=>d});var a=t(4353),r=t(2566),n=t(971),l=t(9786),i=t(5163);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...l},d)=>{let o=r?n.g7:"button";return a.jsx(o,{className:(0,i.cn)(c({variant:s,size:t,className:e})),ref:d,...l})});d.displayName="Button"},5263:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>i,SZ:()=>d,Zb:()=>l,aY:()=>o,ll:()=>c});var a=t(4353),r=t(2566),n=t(5163);let l=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));l.displayName="Card";let i=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...s}));o.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},2958:(e,s,t)=>{"use strict";t.d(s,{X:()=>c});var a=t(4353),r=t(2566),n=t(3708),l=t(6029),i=t(5163);let c=r.forwardRef(({className:e,...s},t)=>a.jsx(n.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:a.jsx(l.Z,{className:"h-4 w-4"})})}));c.displayName=n.fC.displayName},5336:(e,s,t)=>{"use strict";t.d(s,{I:()=>l});var a=t(4353),r=t(2566),n=t(5163);let l=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));l.displayName="Input"},7518:(e,s,t)=>{"use strict";t.d(s,{_:()=>d});var a=t(4353),r=t(2566),n=t(445),l=t(9786),i=t(5163);let c=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef(({className:e,...s},t)=>a.jsx(n.f,{ref:t,className:(0,i.cn)(c(),e),...s}));d.displayName=n.f.displayName},540:(e,s,t)=>{"use strict";t.r(s),t.d(s,{Toaster:()=>l});var a=t(4353),r=t(5394),n=t(13);let l=({...e})=>{let{theme:s="system"}=(0,r.F)();return a.jsx(n.x7,{theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})}},5163:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n,lb:()=>l});var a=t(1734),r=t(4059);function n(...e){return(0,r.m6)((0,a.W)(e))}function l(e){let s=(e??"").toString().replace(/\D/g,"");if(!s)return"0 ₫";try{return Math.floor(Number(s)/1e5).toLocaleString("vi-VN")+" ₫"}catch{return"0 ₫"}}},9409:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p,dynamic:()=>f,metadata:()=>g});var a=t(4699),r=t(9741),n=t.n(r);t(1417);var l=t(8164);let i=(0,l.createProxy)(String.raw`/workspace/shadcn-ui/components/theme-provider.tsx`),{__esModule:c,$$typeof:d}=i;i.default;let o=(0,l.createProxy)(String.raw`/workspace/shadcn-ui/components/theme-provider.tsx#ThemeProvider`),m=(0,l.createProxy)(String.raw`/workspace/shadcn-ui/components/ui/sonner.tsx`),{__esModule:u,$$typeof:h}=m;m.default;let x=(0,l.createProxy)(String.raw`/workspace/shadcn-ui/components/ui/sonner.tsx#Toaster`),f="force-dynamic",g={title:"Hệ thống tra cứu h\xf3a đơn điện",description:"Hệ thống quản l\xfd v\xe0 tra cứu h\xf3a đơn điện hiện đại"};function p({children:e}){return a.jsx("html",{lang:"vi",suppressHydrationWarning:!0,children:a.jsx("body",{className:n().className,children:(0,a.jsxs)(o,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[e,a.jsx(x,{})]})})})}},5557:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x,dynamic:()=>u,revalidate:()=>h});var a=t(4699),r=t(2804),n=t.n(r),l=t(3103),i=t(9368),c=t(7407),d=t(8165);let o=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef(({className:e,variant:s,size:t,asChild:r=!1,...n},l)=>{let c=r?i.g7:"button";return a.jsx(c,{className:(0,d.cn)(o({variant:s,size:t,className:e})),ref:l,...n})});m.displayName="Button";let u="force-dynamic",h=0;function x(){return a.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:(0,a.jsxs)("div",{className:"text-center space-y-6",children:[a.jsx("h1",{className:"text-6xl font-bold text-muted-foreground",children:"404"}),a.jsx("h2",{className:"text-2xl font-semibold",children:"Trang kh\xf4ng t\xecm thấy"}),a.jsx("p",{className:"text-muted-foreground max-w-md",children:"Trang bạn đang t\xecm kiếm kh\xf4ng tồn tại hoặc đ\xe3 được chuyển đi."}),a.jsx(m,{asChild:!0,children:a.jsx(n(),{href:"/dashboard",children:"Về trang chủ"})})]})})}},8165:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n,kv:()=>l});var a=t(4121),r=t(5497);function n(...e){return(0,r.m6)((0,a.W)(e))}async function l(e,s,t=1e4){let a=new AbortController,r=setTimeout(()=>a.abort(),t);try{return await fetch(e,{...s,signal:a.signal})}finally{clearTimeout(r)}}},1417:()=>{}};