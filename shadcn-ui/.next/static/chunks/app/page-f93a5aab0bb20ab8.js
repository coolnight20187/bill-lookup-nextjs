(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9830:function(e,s,t){Promise.resolve().then(t.bind(t,8186))},8186:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c},dynamic:function(){return i}});var n=t(7920),a=t(1335),r=t(682),l=t(5708);let i="force-dynamic";function c(){let[e,s]=(0,a.useState)(null),[t,i]=(0,a.useState)(!0);(0,a.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=await fetch("/api/auth/session");if(e.ok){let t=await e.json();s(t)}}catch(e){console.error("Session check error:",e)}finally{i(!1)}},d=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),s(null)}catch(e){console.error("Logout error:",e)}};return t?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e?(0,n.jsx)(l.v,{user:e,onLogout:d}):(0,n.jsx)(r.U,{onLogin:e=>{s(e)}})}},682:function(e,s,t){"use strict";t.d(s,{U:function(){return m}});var n=t(7920),a=t(1335),r=t(8703),l=t(1538),i=t(6292),c=t(2626),d=t(9072),h=t(6700);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,t(1627).Z)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var u=t(6975);function m(e){let{onLogin:s}=e,[t,m]=(0,a.useState)(""),[x,f]=(0,a.useState)(""),[p,j]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[b,N]=(0,a.useState)(""),v=async e=>{if(e.preventDefault(),!t||!x){N("Vui l\xf2ng nhập đầy đủ th\xf4ng tin");return}y(!0),N("");try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.trim(),password:x,rememberMe:p})}),n=await e.json();if(!e.ok)throw Error(n.error||"Lỗi ".concat(e.status));s(n)}catch(e){N(e.message)}finally{y(!1)}};return(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:(0,n.jsxs)(h.Zb,{className:"w-full max-w-md shadow-xl",children:[(0,n.jsxs)(h.Ol,{className:"space-y-1 text-center",children:[(0,n.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,n.jsx)("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-full",children:(0,n.jsx)(o,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})})}),(0,n.jsx)(h.ll,{className:"text-2xl font-bold",children:"Đăng nhập"}),(0,n.jsx)(h.SZ,{children:"Hệ thống tra cứu h\xf3a đơn điện"})]}),(0,n.jsxs)(h.aY,{children:[b&&(0,n.jsx)(d.bZ,{variant:"destructive",className:"mb-4",children:(0,n.jsx)(d.X,{children:b})}),(0,n.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i._,{htmlFor:"username",children:"T\xean đăng nhập"}),(0,n.jsx)(l.I,{id:"username",type:"text",value:t,onChange:e=>m(e.target.value),placeholder:"Nhập t\xean đăng nhập",disabled:g,required:!0})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(i._,{htmlFor:"password",children:"Mật khẩu"}),(0,n.jsx)(l.I,{id:"password",type:"password",value:x,onChange:e=>f(e.target.value),placeholder:"Nhập mật khẩu",disabled:g,required:!0})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.X,{id:"rememberMe",checked:p,onCheckedChange:e=>j(e),disabled:g}),(0,n.jsx)(i._,{htmlFor:"rememberMe",className:"text-sm",children:"Ghi nhớ đăng nhập"})]}),(0,n.jsx)(r.z,{type:"submit",className:"w-full",disabled:g,children:g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Đang đăng nhập..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o,{className:"mr-2 h-4 w-4"}),"Đăng nhập"]})})]}),(0,n.jsx)("div",{className:"mt-4 text-center",children:(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Admin mặc định: ",(0,n.jsx)("code",{className:"bg-muted px-1 py-0.5 rounded",children:"admin / 123456"})]})})]})]})})}}},function(e){e.O(0,[765,244,708,749,422,744],function(){return e(e.s=9830)}),_N_E=e.O()}]);